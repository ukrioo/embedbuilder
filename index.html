<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <title>Embed Builder</title>
      <link rel="stylesheet" href="styles.css">
      <link rel="stylesheet" href="styles.css">
      <meta property="og:title" content="Embed Builder">
      <meta name="title" content="Embed Builder">
      <meta property="og:description" content="Make your own custom embeds to send to your friends!">
      <meta name="description" content="Make your own custom embeds to send to your friends!">
      <meta name="theme-color" content="#1c1c1c">
      <meta property="og:url" content="https://ukrio.is-a.dev/embedbuilder">
      <meta property="og:image" content="text">
      
      <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
      <link rel="manifest" href="/site.webmanifest">
      
      <script>
        function removeAllMetaTags() {
   let e = document.querySelectorAll("meta");
   e.forEach(e => e.remove())
}

function updateMetaTag(e, t, a = !0) {
   let r = document.createElement("meta");
   r.setAttribute(a ? "property" : "name", e), r.setAttribute("content", t), document.head.appendChild(r)
}

function processMetaTags() {
   let e = new URLSearchParams(window.location.search);
   e.toString() && removeAllMetaTags(), e.forEach((e, t) => {
      let a = decodeURIComponent(e);
      switch (t) {
         case "title":
            updateMetaTag("og:title", a), updateMetaTag("title", a, !1);
            break;
         case "description":
         case "desc":
            updateMetaTag("og:description", a), updateMetaTag("description", a, !1);
            break;
         case "color":
            updateMetaTag("theme-color", a, !1);
            break;
         case "url":
            updateMetaTag("og:url", a);
            break;
         case "image":
         case "img":
            updateMetaTag("og:image", a);
            break;
         case "img-property":
            "large" === a && updateMetaTag("twitter:card", "summary_large_image", !1);
            break;
         default:
            console.warn(`Unhandled property: ${t}`)
      }
   })
}

function generateURL() {
   let e = window.location.origin + window.location.pathname + "?",
      t = new URLSearchParams,
      a = document.getElementById("title").value.trim();
   a && t.append("title", encodeURIComponent(a));
   let r = document.getElementById("description").value.trim();
   r && t.append("desc", encodeURIComponent(r));
   let l = document.getElementById("color").value.trim();
   l && t.append("color", encodeURIComponent(l));
   let n = document.getElementById("url").value.trim();
   n && t.append("url", encodeURIComponent(n));
   let o = document.getElementById("image").value.trim();
   o && t.append("img", encodeURIComponent(o));
   let i = document.getElementById("img-property").value;
   i && t.append("img-property", i);
   let c = e + t.toString();
   document.getElementById("generatedURL").value = c
}
document.querySelectorAll("#metaForm input, #metaForm select").forEach(e => {
   e.addEventListener("input", generateURL)
}), document.getElementById("copyButton").addEventListener("click", () => {
   let e = document.getElementById("generatedURL");
   e.select(), e.setSelectionRange(0, 99999), navigator.clipboard.writeText(e.value).then(() => {
      alert("URL copied to clipboard")
   }).catch(e => {
      console.error("Failed to copy URL", e)
   })
}), window.onload = processMetaTags;
      </script>
   </head>
   <body>
      <header>
         <h1>Embed Builder</h1>
      </header>
      <main class="content">
         <div class="content">
            <form id="metaForm">
               <div class="form-group"><label for="title">Title:</label><input type="text" id="title" name="title" placeholder="Enter your embed title"></div>
               <div class="form-group"><label for="description">Description:</label><input type="text" id="description" name="description" placeholder="Enter your embed description"></div>
               <div class="form-group"><label for="color">Embed Color:</label><input type="text" id="color" name="color" placeholder="Enter hex code color"></div>
               <div class="form-group"><label for="url">URL:</label><input type="text" id="url" name="url" placeholder="Enter title redirect URL"></div>
               <div class="form-group"><label for="image">Image URL:</label><input type="text" id="image" name="image" placeholder="Enter image URL"></div>
               <div class="form-group">
                  <label for="img-property">Image Size:</label>
                  <select id="img-property" name="img-property">
                     <option value="">Default</option>
                     <option value="large">Large</option>
                  </select>
               </div>
            </form>
            <h2>Generated URL:</h2>
            <textarea id="generatedURL" rows="3" cols="50" readonly="readonly"></textarea>
            <button id="copyButton">Copy URL</button>
            <p>Share this url on any social media (made for discord) and the embed should pop-up!</p>
         </div>
      </main>
      <footer>
         <p class="author">Created by <a href="https://ukrioo.github.io">ukrio</a></p>
      </footer>
   </body>
</html>